{% extends 'base.html' %}
{% load static %}

{% block title %}My Favorite Properties - Horizon Reality{% endblock %}

{% block content %}
<link href="{% static 'css/fav.css' %}" rel="stylesheet">

<div class="breadcrumb-section">
    <div class="container">
      <nav aria-label="breadcrumb">
        <ol class="breadcrumb">
          <li class="breadcrumb-item">
            <a href="{% url 'home' %}">
              <i class="bi bi-house-door-fill breadcrumb-home-icon"></i>Home
            </a>
          </li>
          <li class="breadcrumb-item active" aria-current="page">
            My Favorites
          </li>
        </ol>
      </nav>
    </div>
</div>

<!-- Properties Section -->
<section class="properties-section">
    <div class="container">
        <div class="properties-found">
            <p>You have <span class="count">{{ properties|length }}</span> favorite properties</p>
        </div>

        {% if properties %}
        <div class="row grid-view" id="properties-container">
            {% for property in properties %}
            <div class="col-md-6 col-lg-4">
                <div class="property-card">
                    <div class="property-image">
                        <img src="{{ property.image.url }}" alt="{{ property.project_name }}">
                        <div class="property-tags">
                            <span class="property-tag type-tag">{{ property.get_property_type_display }}</span>
                            {% if property.status %}
                            <span class="property-tag status-tag">{{ property.get_status_display }}</span>
                            {% endif %}
                        </div>
                        <div class="property-favorite">
                            <button class="favorite-btn active" data-property-id="{{ property.id }}" aria-label="Remove from favorites">
                                <i class="bi bi-heart-fill"></i>
                            </button>
                        </div>
                    </div>
                    <div class="property-details">
                        <h3>{{ property.project_name }}</h3>
                        <div class="property-location">
                            <i class="bi bi-geo-alt"></i>
                            <span>{{ property.locations.name }}</span>
                        </div>
                        <div class="property-specs">
                            <div class="spec">
                                <i class="bi bi-rulers"></i>
                                <span>{{ property.area }} sqft</span>
                            </div>
                            {% if property.configuration %}
                            <div class="spec">
                                <i class="bi bi-building"></i>
                                <span>{{ property.get_configuration_display }}</span>
                            </div>
                            {% endif %}
                            {% if property.furnishing %}
                            <div class="spec">
                                <i class="bi bi-box-seam"></i>
                                <span>{{ property.get_furnishing_display }}</span>
                            </div>
                            {% endif %}
                        </div>
                        <div class="property-price">
                            <h4>₹{{ property.min_budget }} {{ property.get_min_budget_unit_display }} - ₹{{ property.max_budget }} {{ property.get_max_budget_unit_display }}</h4>
                            <span>{{ property.get_status_display }}</span>
                        </div>
                        <div class="property-actions">
                            <a href="{% url 'property:property_detail' property.id %}" class="btn-view">
                                <i class="bi bi-eye"></i> View
                            </a>
                        </div>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
        {% else %}
        <div class="no-results">
            <i class="bi bi-heart"></i>
            <h3>No Favorite Properties Yet</h3>
            <p>You haven't added any properties to your favorites list. Browse our properties and click the heart icon to add them here.</p>
            <a href="{% url 'property:property_home' %}" class="btn-reset-filters">
                <i class="bi bi-search"></i> Browse Properties
            </a>
        </div>
        {% endif %}
    </div>
</section>

<!-- Toast Container -->
<div class="toast-container" id="toast-container"></div>

{% endblock %}

{% block extra_js %}
<script src="{% static 'js/fav.js' %}"></script> 
{% endblock %}