{% extends "base.html" %}
{% load static %}
{% block title %}View Profile - Horizon Reality{% endblock %}

{% block extra_css %}
<link href="{% static 'css/profile_view.css' %}" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.10.0/font/bootstrap-icons.min.css">
{% endblock %}

{% block content %}
<div class="breadcrumb-section">
    <div class="container">
      <nav aria-label="breadcrumb">
        <ol class="breadcrumb">
          <li class="breadcrumb-item">
            <a href="{% url 'home' %}">
              <i class="bi bi-house-door-fill breadcrumb-home-icon"></i>Home
            </a>
          </li>
          <li class="breadcrumb-item">
            <a href="{% url 'update_profile' %}">
              Update Profile
            </a>
          </li>
          
          <li class="breadcrumb-item active" aria-current="page">
           View Profile
          </li>
        </ol>
      </nav>
    </div>
</div>
<div class="container main-container">
    <div class="row justify-content-center">
        <div class="col-lg-10 col-md-12">
            <div class="profile-card">
                <!-- Profile Header -->
                <div class="profile-header">
                    <div class="profile-avatar">
                        <i class="fas fa-user"></i>
                    </div>
                    <h2>
                        {% if user.first_name or user.last_name %}
                            {{ user.first_name }} {{ user.last_name }}
                        {% else %}
                            {{ user.email|truncatechars:20 }}
                        {% endif %}
                    </h2>
                    <div class="user-info">
                        <div class="user-email">{{ user.email }}</div>
                        {% if user.user_type %}
                            <div class="user-badge">
                                <i class="fas fa-user-tag me-1"></i>
                                {{ user.get_user_type_display }}
                            </div>
                        {% endif %}
                        {% if user.is_active %}
                            <div class="user-badge">
                                <i class="fas fa-check-circle me-1"></i>
                                Active Account
                            </div>
                        {% endif %}
                    </div>
                </div>

                <!-- Messages -->
                {% if messages %}
                    <div class="profile-section">
                        {% for message in messages %}
                            <div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert">
                                {{ message }}
                                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                            </div>
                        {% endfor %}
                    </div>
                {% endif %}

                <!-- Profile Information -->
                <div class="profile-section">
                    <div class="profile-info-grid">
                        <!-- Personal Information -->
                        <div class="info-card">
                            <h5><i class="fas fa-user"></i> Personal Information</h5>
                            <div class="info-row">
                                <span class="info-label">
                                    <i class="fas fa-envelope"></i>
                                    Email
                                </span>
                                <span class="info-value">{{ user.email }}</span>
                            </div>
                            <div class="info-row">
                                <span class="info-label">
                                    <i class="fas fa-user-circle"></i>
                                    First Name
                                </span>
                                <span class="info-value {% if not user.first_name %}empty{% endif %}">
                                    {{ user.first_name|default:"Not provided" }}
                                </span>
                            </div>
                            <div class="info-row">
                                <span class="info-label">
                                    <i class="fas fa-user-circle"></i>
                                    Last Name
                                </span>
                                <span class="info-value {% if not user.last_name %}empty{% endif %}">
                                    {{ user.last_name|default:"Not provided" }}
                                </span>
                            </div>
                            <div class="info-row">
                                <span class="info-label">
                                    <i class="fas fa-phone"></i>
                                    Contact Number
                                </span>
                                <span class="info-value {% if not user.contact_number %}empty{% endif %}">
                                    {{ user.contact_number|default:"Not provided" }}
                                </span>
                            </div>
                        </div>

                        <!-- Professional Information -->
                        <div class="info-card">
                            <h5><i class="fas fa-briefcase"></i> Professional Information</h5>
                            <div class="info-row">
                                <span class="info-label">
                                    <i class="fas fa-user-tag"></i>
                                    User Type
                                </span>
                                <span class="info-value {% if not user.user_type %}empty{% endif %}">
                                    {{ user.get_user_type_display|default:"Not specified" }}
                                </span>
                            </div>
                            <div class="info-row">
                                <span class="info-label">
                                    <i class="fas fa-building"></i>
                                    Firm Type
                                </span>
                                <span class="info-value {% if not user.firm_type %}empty{% endif %}">
                                    {{ user.get_firm_type_display|default:"Not specified" }}
                                </span>
                            </div>
                            <div class="info-row">
                                <span class="info-label">
                                    <i class="fas fa-building-user"></i>
                                    Firm Name
                                </span>
                                <span class="info-value {% if not user.firm_name %}empty{% endif %}">
                                    {{ user.firm_name|default:"Not provided" }}
                                </span>
                            </div>
                            {% if user.user_type == 'broker' %}
                                <div class="info-row">
                                    <span class="info-label">
                                        <i class="fas fa-star"></i>
                                        Broker Status
                                    </span>
                                    <span class="info-value">
                                        <span class="status-badge status-active">Verified Broker</span>
                                    </span>
                                </div>
                            {% endif %}
                        </div>

                        <!-- Account Information -->
                        <div class="info-card">
                            <h5><i class="fas fa-cog"></i> Account Information</h5>
                            <div class="info-row">
                                <span class="info-label">
                                    <i class="fas fa-calendar-alt"></i>
                                    Member Since
                                </span>
                                <span class="info-value">
                                    {{ user.date_joined|date:"F d, Y" }}
                                </span>
                            </div>
                            <div class="info-row">
                                <span class="info-label">
                                    <i class="fas fa-clock"></i>
                                    Last Login
                                </span>
                                <span class="info-value">
                                    {% if user.last_login %}
                                        {{ user.last_login|date:"F d, Y g:i A" }}
                                    {% else %}
                                        Never logged in
                                    {% endif %}
                                </span>
                            </div>
                            <div class="info-row">
                                <span class="info-label">
                                    <i class="fas fa-shield-alt"></i>
                                    Account Status
                                </span>
                                <span class="info-value">
                                    {% if user.is_active %}
                                        <span class="status-badge status-active">Active</span>
                                    {% else %}
                                        <span class="status-badge status-inactive">Inactive</span>
                                    {% endif %}
                                </span>
                            </div>
                        </div>
                    </div>

                    <!-- Action Buttons -->
                    <div class="action-buttons">
                        <a href="{% url 'update_profile' %}" class="btn btn-primary">
                            <i class="fas fa-edit me-2"></i>Update Profile
                        </a>
                       
                        <a href="{% url 'home' %}" class="btn btn-secondary">
                            <i class="fas fa-home me-2"></i>Back to Home
                        </a>
                    </div>
                </div>

                <!-- Navigation Links -->
                <div class="navigation-links">
                    <a href="{% url 'update_profile' %}">
                        <i class="fas fa-user-edit me-1"></i>Update Profile
                    </a>
                   
                    <a href="{% url 'home' %}">
                        <i class="fas fa-home me-1"></i>Back to Home
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<!-- Only load your custom profile script - Bootstrap is already loaded in base template -->
<script src="{% static 'js/profile_view.js' %}"></script>

<!-- REMOVED: Duplicate Bootstrap JS and conflicting dropdown script -->
{% endblock %}